<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.5">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Case study: How does a bike-share navigate speedy success? – Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ff4371ef257df69894857e99c6ad0d06.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-dec4957386d03255e1655963b31d62d3.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-530bf8e59df25186f8bffdc63bad3503.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-bd21be224d3c18e074efcd5cf41426bc.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Data Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-netflix-titles-covid-comparison" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Netflix titles COVID Comparison</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-netflix-titles-covid-comparison">    
        <li>
    <a class="dropdown-item" href="../intro.html">
 <span class="dropdown-text">Data Preparation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis.html">
 <span class="dropdown-text">Visualization &amp; Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-case-study-for-cyclistic" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Case Study for Cyclistic</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-case-study-for-cyclistic">    
        <li>
    <a class="dropdown-item" href="../case.html">
 <span class="dropdown-text">Case Study Analysis</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/aravindsankars/myData_Analysis" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a></li>
  <li><a href="#data-cleaning-and-feature-engineering" id="toc-data-cleaning-and-feature-engineering" class="nav-link" data-scroll-target="#data-cleaning-and-feature-engineering">Data Cleaning and Feature Engineering</a>
  <ul class="collapse">
  <li><a href="#insights" id="toc-insights" class="nav-link" data-scroll-target="#insights">Insights</a></li>
  </ul></li>
  <li><a href="#visualization" id="toc-visualization" class="nav-link" data-scroll-target="#visualization">Visualization</a>
  <ul class="collapse">
  <li><a href="#bar-chart-total-rides-by-day-of-the-week" id="toc-bar-chart-total-rides-by-day-of-the-week" class="nav-link" data-scroll-target="#bar-chart-total-rides-by-day-of-the-week">1. Bar Chart: Total rides by day of the week</a></li>
  <li><a href="#heatmap-rides-by-hour-of-day-vs.-day-of-week" id="toc-heatmap-rides-by-hour-of-day-vs.-day-of-week" class="nav-link" data-scroll-target="#heatmap-rides-by-hour-of-day-vs.-day-of-week">2. Heatmap: Rides by hour of day vs.&nbsp;day of week</a></li>
  <li><a href="#line-chart-trends-in-total-rides-by-hour-of-the-day" id="toc-line-chart-trends-in-total-rides-by-hour-of-the-day" class="nav-link" data-scroll-target="#line-chart-trends-in-total-rides-by-hour-of-the-day">3. Line Chart: Trends in total rides by hour of the day</a></li>
  <li><a href="#box-plot-compare-ride-lengths-for-casuals-vs.-members" id="toc-box-plot-compare-ride-lengths-for-casuals-vs.-members" class="nav-link" data-scroll-target="#box-plot-compare-ride-lengths-for-casuals-vs.-members">4. Box Plot: Compare ride lengths for casuals vs.&nbsp;members</a></li>
  <li><a href="#bar-plot-ride-length-vs.-hour-of-the-day" id="toc-bar-plot-ride-length-vs.-hour-of-the-day" class="nav-link" data-scroll-target="#bar-plot-ride-length-vs.-hour-of-the-day">5. Bar Plot: Ride length vs.&nbsp;hour of the day</a></li>
  <li><a href="#bucketize-based-on-time-of-day" id="toc-bucketize-based-on-time-of-day" class="nav-link" data-scroll-target="#bucketize-based-on-time-of-day">Bucketize based on time of day</a></li>
  <li><a href="#monthly-analysis-seasonal-trends-in-ridership-and-ride-length" id="toc-monthly-analysis-seasonal-trends-in-ridership-and-ride-length" class="nav-link" data-scroll-target="#monthly-analysis-seasonal-trends-in-ridership-and-ride-length">Monthly Analysis: Seasonal Trends in Ridership and Ride Length</a></li>
  </ul></li>
  <li><a href="#final-observations" id="toc-final-observations" class="nav-link" data-scroll-target="#final-observations">Final Observations:</a>
  <ul class="collapse">
  <li><a href="#key-insights" id="toc-key-insights" class="nav-link" data-scroll-target="#key-insights">Key Insights:</a></li>
  <li><a href="#opportunities-to-convert-casual-riders" id="toc-opportunities-to-convert-casual-riders" class="nav-link" data-scroll-target="#opportunities-to-convert-casual-riders">Opportunities to Convert Casual Riders</a></li>
  <li><a href="#recommendations-for-digital-media-strategy" id="toc-recommendations-for-digital-media-strategy" class="nav-link" data-scroll-target="#recommendations-for-digital-media-strategy">Recommendations for Digital Media Strategy</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Case study: How does a bike-share navigate speedy success?</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Cyclistic, a bike-share company, aims to understand how different types of users—annual members and casual riders—use their service. This analysis focuses on identifying usage patterns, preferences, and behavioral differences between these two groups. By using the provided dataset, we can uncover actionable insights that support targeted marketing and operational strategies to optimize Cyclistic’s services.</p>
<p>The primary question this case study seeks to address is: How do annual members and casual riders use Cyclistic bikes differently?</p>
<p>The other two questions are: Why would casual riders buy Cyclistic annual memberships? How can Cyclistic use digital media to influence casual riders to become members?</p>
<p>Using visualizations, we analyze key trends such as ride frequency, duration, and time-based usage patterns. Each visualization is accompanied by an explanation of its purpose and refined observations derived from the analysis.</p>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">Data Preparation</h2>
<p>To begin the analysis, the first step involved loading the combined dataset containing ride data for a full year. The dataset was prepared by merging monthly ride data files into a single comprehensive file, ensuring all records were consolidated for analysis. This file, named combined_data.csv, was then loaded into a pandas DataFrame for further exploration and processing. Dataset source: https://divvy-tripdata.s3.amazonaws.com/index.html</p>
<div id="ea3e32b8-2666-4d0b-9acd-d0b029df8fd2" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the combined data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'/Users/aravindsankars/Documents/Case_Study_Cycles/dataset_prepare/combined_data.csv'</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(file_path)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.head())</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Combined dataset has </span><span class="sc">{</span>df<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> rows and </span><span class="sc">{</span>df<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> columns."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            ride_id  rideable_type           started_at             ended_at  \
0  743252713F32516B   classic_bike  2024-04-22 19:08:21  2024-04-22 19:12:56   
1  BE90D33D2240C614  electric_bike  2024-04-11 06:19:24  2024-04-11 06:22:21   
2  D47BBDDE7C40DD61   classic_bike  2024-04-20 11:13:13  2024-04-20 11:29:31   
3  6684E760BF9EA9B5   classic_bike  2024-04-04 18:39:20  2024-04-04 18:43:06   
4  CA9EFC0D24C24A27  electric_bike  2024-04-19 19:30:20  2024-04-19 20:07:42   

           start_station_name start_station_id  \
0  Aberdeen St &amp; Jackson Blvd            13157   
1  Aberdeen St &amp; Jackson Blvd            13157   
2  Sheridan Rd &amp; Montrose Ave     TA1307000107   
3  Aberdeen St &amp; Jackson Blvd            13157   
4  Sheridan Rd &amp; Montrose Ave     TA1307000107   

                 end_station_name end_station_id  start_lat  start_lng  \
0    Desplaines St &amp; Jackson Blvd          15539  41.877726 -87.654787   
1    Desplaines St &amp; Jackson Blvd          15539  41.877722 -87.654959   
2  Ashland Ave &amp; Belle Plaine Ave          13249  41.961670 -87.654640   
3    Desplaines St &amp; Jackson Blvd          15539  41.877726 -87.654787   
4    Stetson Ave &amp; South Water St   TA1308000029  41.961613 -87.654615   

     end_lat    end_lng member_casual  
0  41.878119 -87.643948        member  
1  41.878119 -87.643948        member  
2  41.956057 -87.668835        member  
3  41.878119 -87.643948        member  
4  41.886835 -87.622320        member  
Combined dataset has 5860568 rows and 13 columns.</code></pre>
</div>
</div>
</section>
<section id="data-cleaning-and-feature-engineering" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning-and-feature-engineering">Data Cleaning and Feature Engineering</h2>
<p>The next step in the analysis involved cleaning the dataset and engineering new features to derive meaningful insights.</p>
<section id="cleaning-the-datetime-columns" class="level4">
<h4 class="anchored" data-anchor-id="cleaning-the-datetime-columns">Cleaning the DateTime Columns</h4>
<p><strong>Remove Extra Characters:</strong> The started_at and ended_at columns were converted to datetime format using pd.to_datetime. Extra characters (e.g., fractions of a second) were removed to ensure consistency.</p>
<div id="cec7fa56-9efd-4c75-9d73-c5a2e58f20c2" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean and convert the datetime columns</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'started_at'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'started_at'</span>].<span class="bu">str</span>.split(<span class="st">'.'</span>).<span class="bu">str</span>[<span class="dv">0</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)  <span class="co"># Remove extra characters</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'ended_at'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'ended_at'</span>].<span class="bu">str</span>.split(<span class="st">'.'</span>).<span class="bu">str</span>[<span class="dv">0</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)  <span class="co"># Remove extra characters</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Handle Missing or Invalid Values:</strong> Rows with missing or invalid values in the started_at or ended_at columns were dropped to maintain data integrity.</p>
<div id="83b00956-7493-4c12-b93a-1496fe742f2c" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop rows with invalid or missing datetime values</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">'started_at'</span>, <span class="st">'ended_at'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="feature-engineering" class="level4">
<h4 class="anchored" data-anchor-id="feature-engineering">Feature Engineering</h4>
<p><strong>Ride Length:</strong> The duration of each ride was calculated in minutes and stored in a new column, ride_length.</p>
<p><strong>Day of the Week:</strong> The day of the week for each ride’s start time was extracted and added as the day_of_week column.</p>
<p><strong>Hour of the Day:</strong> The hour when each ride started was extracted to analyze hourly trends. This was stored in the hour_of_day column.</p>
<div id="2f8c09d0-432f-4430-a972-6d56cac99daf" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add derived columns</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'ride_length'</span>] <span class="op">=</span> (df[<span class="st">'ended_at'</span>] <span class="op">-</span> df[<span class="st">'started_at'</span>]).dt.total_seconds() <span class="op">/</span> <span class="dv">60</span>  <span class="co"># Ride length in minutes</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'day_of_week'</span>] <span class="op">=</span> df[<span class="st">'started_at'</span>].dt.day_name()  <span class="co"># Day of the week</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'hour_of_day'</span>] <span class="op">=</span> df[<span class="st">'started_at'</span>].dt.hour  <span class="co"># Hour of the day</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="summary-table-creation" class="level4">
<h4 class="anchored" data-anchor-id="summary-table-creation">Summary Table Creation</h4>
<p><strong>Grouping and Aggregation:</strong> The data was grouped by member_casual, day_of_week, and hour_of_day to calculate metrics such as ride count and average ride length.</p>
<p><strong>Day Ordering:</strong> The day_of_week column was ordered to reflect the natural sequence of days from Sunday to Saturday.</p>
<div id="e0a6490d-969e-4419-88a3-289a2699e3b9" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary grouping by member/casual, day of week, and hour of day</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> df.groupby([<span class="st">'member_casual'</span>, <span class="st">'day_of_week'</span>, <span class="st">'hour_of_day'</span>], as_index<span class="op">=</span><span class="va">False</span>).agg(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    ride_count<span class="op">=</span>(<span class="st">'ride_id'</span>, <span class="st">'count'</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    avg_ride_length<span class="op">=</span>(<span class="st">'ride_length'</span>, <span class="st">'mean'</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Order days of the week</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>day_order <span class="op">=</span> [<span class="st">'Sunday'</span>, <span class="st">'Monday'</span>, <span class="st">'Tuesday'</span>, <span class="st">'Wednesday'</span>, <span class="st">'Thursday'</span>, <span class="st">'Friday'</span>, <span class="st">'Saturday'</span>]</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>df_summary[<span class="st">'day_of_week'</span>] <span class="op">=</span> pd.Categorical(df_summary[<span class="st">'day_of_week'</span>], categories<span class="op">=</span>day_order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate data to include total rides, average ride length, most common day, and most common hour</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>rider_comparison <span class="op">=</span> df.groupby(<span class="st">'member_casual'</span>).agg(</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    total_rides<span class="op">=</span>(<span class="st">'ride_id'</span>, <span class="st">'count'</span>),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    avg_ride_length<span class="op">=</span>(<span class="st">'ride_length'</span>, <span class="st">'mean'</span>),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    most_common_day<span class="op">=</span>(<span class="st">'day_of_week'</span>, <span class="kw">lambda</span> x: x.mode()[<span class="dv">0</span>] <span class="cf">if</span> <span class="kw">not</span> x.mode().empty <span class="cf">else</span> <span class="va">None</span>),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    most_common_hour<span class="op">=</span>(<span class="st">'hour_of_day'</span>, <span class="kw">lambda</span> x: x.mode()[<span class="dv">0</span>] <span class="cf">if</span> <span class="kw">not</span> x.mode().empty <span class="cf">else</span> <span class="va">None</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>).reset_index()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rider-comparison-table" class="level4">
<h4 class="anchored" data-anchor-id="rider-comparison-table">Rider Comparison Table</h4>
<p>A high-level comparison between casual riders and members was created, summarizing:</p>
<ul>
<li>Total Rides: Number of rides taken by each group.</li>
<li>Average Ride Length: Average duration of rides in minutes.</li>
<li>Most Common Day: The day of the week with the highest number of rides.</li>
<li>Most Common Hour: The hour of the day with the highest number of rides.</li>
</ul>
<div id="f57db634-c6cf-435e-b033-ae1bf7ae478e" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the table</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>rider_comparison</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">member_casual</th>
<th data-quarto-table-cell-role="th">total_rides</th>
<th data-quarto-table-cell-role="th">avg_ride_length</th>
<th data-quarto-table-cell-role="th">most_common_day</th>
<th data-quarto-table-cell-role="th">most_common_hour</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>casual</td>
<td>2151658</td>
<td>25.150669</td>
<td>Saturday</td>
<td>17</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>member</td>
<td>3708910</td>
<td>12.770208</td>
<td>Wednesday</td>
<td>17</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="insights" class="level3">
<h3 class="anchored" data-anchor-id="insights">Insights</h3>
<p><strong>Casual Riders:</strong> - Have significantly longer ride lengths, likely indicating recreational usage. - Prefer weekends (especially Saturday) and late afternoon hours (5 PM).</p>
<p><strong>Members:</strong> - Take shorter rides, aligning with regular commuting patterns. - Show higher activity during weekdays (especially Wednesday) at peak commuting times (5 PM).</p>
<p>Lets dive deeper and find out what differentiates the two groups of riders.</p>
<p>To maintain consistency in visualizations throughout the analysis, a uniform color palette is defined at the outset.</p>
<div id="05e46142-2645-4b39-9e5d-ff0cb13fcd13" class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a color palette for casual and member groups</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> {<span class="st">'casual'</span>: <span class="st">'#e73924'</span>, <span class="st">'member'</span>: <span class="st">'#1f77b4'</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="visualization" class="level2">
<h2 class="anchored" data-anchor-id="visualization">Visualization</h2>
<p>To gain actionable insights into the behavior and preferences of Cyclistic’s casual and member riders, we employ a series of targeted visualizations. These plots not only uncover patterns in ridership but also highlight key differences between the two groups. These visualizations collectively address the primary question: <em>How do annual members and casual riders use Cyclistic bikes differently?</em></p>
<section id="bar-chart-total-rides-by-day-of-the-week" class="level3">
<h3 class="anchored" data-anchor-id="bar-chart-total-rides-by-day-of-the-week">1. Bar Chart: Total rides by day of the week</h3>
<p>This plot provides an overview of ride activity across the week, highlighting peak days for both casual and member riders. It helps identify whether weekends or weekdays see higher ridership and how these patterns differ between the groups.</p>
<div id="d8ab50b5-9471-4211-af7f-3599423bc0bf" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bar_data <span class="op">=</span> df.groupby([<span class="st">'day_of_week'</span>, <span class="st">'member_casual'</span>])[<span class="st">'ride_id'</span>].count().reset_index()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>bar_data_pivot <span class="op">=</span> bar_data.pivot(index<span class="op">=</span><span class="st">'day_of_week'</span>, columns<span class="op">=</span><span class="st">'member_casual'</span>, values<span class="op">=</span><span class="st">'ride_id'</span>).reindex(day_order)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>bar_data_pivot.plot(kind<span class="op">=</span><span class="st">'bar'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), color<span class="op">=</span>[<span class="st">'#e73924'</span>, <span class="st">'#1f77b4'</span>], width<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#1f77b4 #ff7f0e </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Total Rides by Day of the Week'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Day of Week'</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Ride Count'</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Rider Type'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 1200x600 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-9-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can see that the ride counts are much higher for members than casuals with most of the rides happening during weekdays but evenly distributed for casuals on all days except on weekends where there is an increase.</p>
<ul>
<li>Members exhibit higher ride counts on weekdays, with a clear drop during weekends</li>
<li>Casual riders maintain a relatively steady ride count across the week, with significant increases on weekends</li>
</ul>
<p>This pattern enforces the idea that members primarily use bikes for work-related purposes, while casual riders use them for leisure activities.</p>
</section>
<section id="heatmap-rides-by-hour-of-day-vs.-day-of-week" class="level3">
<h3 class="anchored" data-anchor-id="heatmap-rides-by-hour-of-day-vs.-day-of-week">2. Heatmap: Rides by hour of day vs.&nbsp;day of week</h3>
<p>The heatmap visualizes ride activity over the course of the week and by hour of the day. This allows us to pinpoint peak usage times for casual and member riders, revealing patterns such as morning and evening commuting hours for members or recreational afternoon rides for casual riders.</p>
<div id="5e876dbd-03a5-48b1-b59d-403ee37f5c78" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>heatmap_data <span class="op">=</span> df_summary.pivot_table(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'hour_of_day'</span>, columns<span class="op">=</span><span class="st">'day_of_week'</span>, values<span class="op">=</span><span class="st">'ride_count'</span>, aggfunc<span class="op">=</span><span class="st">'sum'</span>, observed<span class="op">=</span><span class="va">False</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>sns.heatmap(heatmap_data, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, annot<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Heatmap: Rides by Hour of Day vs. Day of Week'</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Day of Week'</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Hour of Day'</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>As seen clearly in the heatmap, most rides happen on weekdays between 7-9AM and 3-7PM. We can safely assume that these are office timings and most of the customers use the cycles as commute to work. Additionally, on friday mornings, there are less rides while there are more in the evening. The peak hour is 3:30-5:30 pm on Mondays.</p>
<ul>
<li>Most rides occur during weekdays between 7-9 AM and 3-7 PM, aligning with commuting hours</li>
<li>Friday mornings show reduced ride activity, with an increase in the evening andthrough weekend, potentially due to casual social outings</li>
<li>The highest peak is observed on Monday evenings (3:30–5:30 PM)</li>
</ul>
<p>The number of rides of members and casuals differ and a lot as we have seen from the above rider_comparison table and from the bar plot. Hence, I might be able to get more insights if I analyze the casual riders and members differently.</p>
<section id="rides-by-hour-of-day-vs.-day-of-week-for-each-group-of-members" class="level4">
<h4 class="anchored" data-anchor-id="rides-by-hour-of-day-vs.-day-of-week-for-each-group-of-members">Rides by hour of day vs.&nbsp;day of week for each group of members</h4>
<p>Breaking down the heatmap by rider type allows us to uncover specific behavioral differences between casual riders and members.</p>
<div id="febdf572-06cb-4d9b-93cd-30d155981f21" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate heatmaps for casual and member riders</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_heatmap_by_rider_type(df_summary, rider_type, title_suffix):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter data for the specific rider type</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    df_filtered <span class="op">=</span> df_summary[df_summary[<span class="st">'member_casual'</span>] <span class="op">==</span> rider_type]</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pivot the data to create a heatmap-friendly format</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    heatmap_data <span class="op">=</span> df_filtered.pivot_table(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="st">'hour_of_day'</span>, </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span><span class="st">'day_of_week'</span>, </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        values<span class="op">=</span><span class="st">'ride_count'</span>, </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        aggfunc<span class="op">=</span><span class="st">'sum'</span>, </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        observed<span class="op">=</span><span class="va">False</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the heatmap</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(heatmap_data, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, annot<span class="op">=</span><span class="va">False</span>, cbar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Heatmap: Rides by Hour of Day vs. Day of Week (</span><span class="sc">{</span>rider_type<span class="sc">.</span>capitalize()<span class="sc">}</span><span class="ss"> Riders - </span><span class="sc">{</span>title_suffix<span class="sc">}</span><span class="ss">)'</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'Day of Week'</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Hour of Day'</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate heatmaps for casual and member riders</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>generate_heatmap_by_rider_type(df_summary, rider_type<span class="op">=</span><span class="st">'casual'</span>, title_suffix<span class="op">=</span><span class="st">'All Data'</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>generate_heatmap_by_rider_type(df_summary, rider_type<span class="op">=</span><span class="st">'member'</span>, title_suffix<span class="op">=</span><span class="st">'All Data'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-11-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>When we analyze casual and members differently, we can see that members mostly use the cycles for office purposes(mornings and evenings on weekdays). Most number of casuals ride in the weekend(Saturday and Sunday) especially on Saturdays from 12PM to 5PM.</p>
<ul>
<li><strong>Members</strong>: Predominantly ride during weekday mornings and evenings, indicating usage for commuting.</li>
<li><strong>Casual Riders</strong>: Primarily ride during weekends, with peak activity on Saturdays (12 PM–5 PM), suggesting recreational or leisure use.</li>
</ul>
</section>
</section>
<section id="line-chart-trends-in-total-rides-by-hour-of-the-day" class="level3">
<h3 class="anchored" data-anchor-id="line-chart-trends-in-total-rides-by-hour-of-the-day">3. Line Chart: Trends in total rides by hour of the day</h3>
<p>By plotting the total number of rides for each hour of the day, we capture the daily ridership trends. This visualization helps to compare hourly usage patterns and highlights how casual and member riders utilize the service at different times of the day.</p>
<div id="6672612e-9799-4674-a446-773ffad7f034" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>line_data <span class="op">=</span> df.groupby([<span class="st">'hour_of_day'</span>, <span class="st">'member_casual'</span>])[<span class="st">'ride_id'</span>].count().reset_index()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>line_data, x<span class="op">=</span><span class="st">'hour_of_day'</span>, y<span class="op">=</span><span class="st">'ride_id'</span>, hue<span class="op">=</span><span class="st">'member_casual'</span>, marker<span class="op">=</span><span class="st">'o'</span>, palette<span class="op">=</span><span class="st">'Set1'</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Trends in Total Rides by Hour of the Day'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour of Day'</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Ride Count'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">24</span>))</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Rider Type'</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Members</strong> show distinct peaks during morning and evening hours, reinforcing commuting patterns.</li>
<li><strong>Casual</strong> riders have a single gradual peak in the afternoon, which correlates with recreational activity.</li>
</ul>
</section>
<section id="box-plot-compare-ride-lengths-for-casuals-vs.-members" class="level3">
<h3 class="anchored" data-anchor-id="box-plot-compare-ride-lengths-for-casuals-vs.-members">4. Box Plot: Compare ride lengths for casuals vs.&nbsp;members</h3>
<p>A box plot is used to explore the distribution of ride lengths for each rider type. It shows differences in ride duration and variability, illustrating that casual riders often have longer and more varied ride times compared to the consistent patterns of members.</p>
<p><strong>Cleaning ride_length column</strong></p>
<p><em>Steps:</em> - Check for and handle NaN values in the ride_length column. - Find maximum and minimum ride lengths in the dataset. - Ensure that ride_length is in a numeric format (e.g., float or integer). If it’s stored as a string, convert it to a numeric type. - Remove rides shorter than 1 minute and Cap the maximum ride length(removing outliers).</p>
<div id="cb4f4f8a-92a2-4c4a-b21d-c3866ad1e408" class="cell" data-execution_count="291">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the maximum and minimum ride lengths</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>max_ride_length <span class="op">=</span> df[<span class="st">'ride_length'</span>].<span class="bu">max</span>()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>min_ride_length <span class="op">=</span> df[<span class="st">'ride_length'</span>].<span class="bu">min</span>()</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Maximum Ride Length: </span><span class="sc">{</span>max_ride_length<span class="sc">}</span><span class="ss"> minutes"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Minimum Ride Length: </span><span class="sc">{</span>min_ride_length<span class="sc">}</span><span class="ss"> minutes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Maximum Ride Length: 60.0 minutes
Minimum Ride Length: 1.0 minutes</code></pre>
</div>
</div>
<div id="503e5bf8-db97-4414-b8ad-a0d18571c730" class="cell" data-execution_count="297">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for null values</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'ride_length'</span>].isnull().<span class="bu">sum</span>())</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop rows with NaN in ride_length</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">'ride_length'</span>])</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert ride_length to numeric (e.g., if stored as strings)</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'ride_length'</span>] <span class="op">=</span> pd.to_numeric(df[<span class="st">'ride_length'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out invalid ride lengths</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df[(df[<span class="st">'ride_length'</span>] <span class="op">&gt;=</span> <span class="dv">1</span>) <span class="op">&amp;</span> (df[<span class="st">'ride_length'</span>] <span class="op">&lt;=</span> <span class="dv">70</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0</code></pre>
</div>
</div>
<div id="9934dfce-98f8-4300-9ec8-00deb41f600d" class="cell" data-execution_count="299">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">'member_casual'</span>, y<span class="op">=</span><span class="st">'ride_length'</span>, hue<span class="op">=</span><span class="st">'member_casual'</span>, palette<span class="op">=</span>colors, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Ride Length Distribution by Rider Type'</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Rider Type'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Ride Length (minutes)'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">70</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>From this plot we can see that, casuals ride for more duration than members. There is more variability in ride lengths for casuals. The median of casuals is above 20 minutes and member is below 10 minutes.</p>
<ul>
<li><p><strong>Casual Riders:</strong> Tend to take longer rides with greater variability and many outliers. Likely use the service for leisure or recreation.</p></li>
<li><p><strong>Member Riders:</strong> Have shorter and more consistent ride lengths. Primarily use the service for regular, utilitarian travel like commuting.</p></li>
</ul>
<p>Casual riders tend to have significantly longer ride durations, with a median above 20 minutes, and show greater variability with numerous outliers. Members have shorter and more consistent ride lengths, with a median below 10 minutes.</p>
<p>These differences align with the hypothesis that casual riders prioritize recreational trips, while members focus on efficiency.</p>
</section>
<section id="bar-plot-ride-length-vs.-hour-of-the-day" class="level3">
<h3 class="anchored" data-anchor-id="bar-plot-ride-length-vs.-hour-of-the-day">5. Bar Plot: Ride length vs.&nbsp;hour of the day</h3>
<p>This plot delves into the relationship between ride length and the hour of the day, segmented by rider type. It uncovers trends such as casual riders taking longer rides during non-peak hours, while members generally have shorter, consistent ride lengths.</p>
<div id="0701dd01-4324-4c52-b8bf-c12dc5956a4d" class="cell" data-execution_count="304">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot a bar graph for average ride length by hour of day, grouped by rider type</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>sns.barplot(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'hour_of_day'</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'ride_length'</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">'member_casual'</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    errorbar<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span><span class="st">'Set1'</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add titles and labels</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Ride Length vs. Hour of the Day'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour of Day'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Average Ride Length (minutes)'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Rider Type'</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>plt.xticks(fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Casual</strong> riders consistently have longer ride durations throughout the day, with peaks in the afternoon and evening hours.</p>
<p><strong>Members</strong> maintain relatively stable ride lengths, suggesting consistent usage patterns.</p>
<p>There is a dip in the duration in the late night and early morning hours for casual members. The early morning casuals have the lowest ride lengths and this suggests that these casuals might be using it for commute purposes like going to their gym in the early morning. These people have the most probability of converting to annual members.</p>
</section>
<section id="bucketize-based-on-time-of-day" class="level3">
<h3 class="anchored" data-anchor-id="bucketize-based-on-time-of-day">Bucketize based on time of day</h3>
<p>Categorize rides into time periods (Morning, Afternoon, Evening, Night) to analyze patterns in conjunction with rider type and day of the week.</p>
<ul>
<li>Categorized hours of the day into four time buckets.</li>
<li>Grouped data by member_casual, day_of_week, and time_of_day.</li>
<li>Created heatmaps to visualize:
<ul>
<li>Total rides per time of day and day of week.</li>
<li>Average ride length per time of day and day of week.</li>
</ul></li>
</ul>
<div id="f48c9fbb-8144-491c-87fd-8b650bf50ea3" class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define hour categories</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> categorize_hour(hour):</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="dv">5</span> <span class="op">&lt;=</span> hour <span class="op">&lt;</span> <span class="dv">12</span>:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Morning'</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">12</span> <span class="op">&lt;=</span> hour <span class="op">&lt;</span> <span class="dv">17</span>:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Afternoon'</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">17</span> <span class="op">&lt;=</span> hour <span class="op">&lt;</span> <span class="dv">21</span>:</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Evening'</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Night'</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new column for time categories</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'time_of_day'</span>] <span class="op">=</span> df[<span class="st">'hour_of_day'</span>].<span class="bu">apply</span>(categorize_hour)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the order for time_of_day</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>time_order <span class="op">=</span> [<span class="st">'Morning'</span>, <span class="st">'Afternoon'</span>, <span class="st">'Evening'</span>, <span class="st">'Night'</span>]</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'time_of_day'</span>] <span class="op">=</span> pd.Categorical(df[<span class="st">'time_of_day'</span>], categories<span class="op">=</span>time_order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze by time of day, day of the week, and rider type</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>time_analysis <span class="op">=</span> df.groupby([<span class="st">'member_casual'</span>, <span class="st">'day_of_week'</span>, <span class="st">'time_of_day'</span>], observed<span class="op">=</span><span class="va">False</span>).agg(</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    total_rides<span class="op">=</span>(<span class="st">'ride_id'</span>, <span class="st">'count'</span>),</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    avg_ride_length<span class="op">=</span>(<span class="st">'ride_length'</span>, <span class="st">'mean'</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>).reset_index()</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Order the day_of_week column</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>day_order <span class="op">=</span> [<span class="st">'Monday'</span>, <span class="st">'Tuesday'</span>, <span class="st">'Wednesday'</span>, <span class="st">'Thursday'</span>, <span class="st">'Friday'</span>, <span class="st">'Saturday'</span>, <span class="st">'Sunday'</span>]</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>time_analysis[<span class="st">'day_of_week'</span>] <span class="op">=</span> pd.Categorical(time_analysis[<span class="st">'day_of_week'</span>], categories<span class="op">=</span>day_order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the results for better readability</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>time_analysis.sort_values(by<span class="op">=</span>[<span class="st">'member_casual'</span>, <span class="st">'day_of_week'</span>, <span class="st">'time_of_day'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="total-rides-heatmap" class="level4">
<h4 class="anchored" data-anchor-id="total-rides-heatmap">Total Rides Heatmap</h4>
<p>The heatmaps for total rides provide a detailed view of ride activity patterns for casual and member riders based on the time of day and day of the week.</p>
<div id="7bdd450a-a405-447d-b22a-495a824dbf75" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a heatmap to visualize total rides by day of week and time of day for each rider type</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> rider_type <span class="kw">in</span> [<span class="st">'casual'</span>, <span class="st">'member'</span>]:</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    heatmap_data <span class="op">=</span> time_analysis[time_analysis[<span class="st">'member_casual'</span>] <span class="op">==</span> rider_type].pivot(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="st">'time_of_day'</span>, columns<span class="op">=</span><span class="st">'day_of_week'</span>, values<span class="op">=</span><span class="st">'total_rides'</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(heatmap_data, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.0f'</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, cbar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Total Rides Heatmap (</span><span class="sc">{</span>rider_type<span class="sc">.</span>capitalize()<span class="sc">}</span><span class="ss"> Riders)'</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'Day of Week'</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Time of Day'</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-18-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="average-ride-length-heatmap" class="level4">
<h4 class="anchored" data-anchor-id="average-ride-length-heatmap">Average Ride Length Heatmap</h4>
<p>The heatmaps for average ride length reveal additional insights into the nature of trips for each rider type.</p>
<div id="b46bb4ec-1b9d-450b-9e88-c3e4eabb6537" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a heatmap to visualize average ride length by day of week and time of day for each rider type</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> rider_type <span class="kw">in</span> [<span class="st">'casual'</span>, <span class="st">'member'</span>]:</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    heatmap_data <span class="op">=</span> time_analysis[time_analysis[<span class="st">'member_casual'</span>] <span class="op">==</span> rider_type].pivot(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="st">'time_of_day'</span>, columns<span class="op">=</span><span class="st">'day_of_week'</span>, values<span class="op">=</span><span class="st">'avg_ride_length'</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    sns.heatmap(heatmap_data, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.1f'</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, cbar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Average Ride Length Heatmap (</span><span class="sc">{</span>rider_type<span class="sc">.</span>capitalize()<span class="sc">}</span><span class="ss"> Riders)'</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'Day of Week'</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Time of Day'</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-19-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="observations" class="level4">
<h4 class="anchored" data-anchor-id="observations">Observations:</h4>
<p><strong>Casual Riders:</strong> - Prefer afternoons and evenings, especially on weekends. - Tend to have longer average ride lengths during non-peak hours, aligning with recreational usage.</p>
<p><strong>Member Riders:</strong> - High activity during mornings and evenings on weekdays, consistent with commute times. - Show shorter, more efficient rides compared to casual riders.</p>
<p>Now, lets uncover seasonal usage trends and compare how casual and member riders adapt their riding habits throughout the year.</p>
</section>
</section>
<section id="monthly-analysis-seasonal-trends-in-ridership-and-ride-length" class="level3">
<h3 class="anchored" data-anchor-id="monthly-analysis-seasonal-trends-in-ridership-and-ride-length">Monthly Analysis: Seasonal Trends in Ridership and Ride Length</h3>
<p>To better understand how seasonal changes influence rider behavior, we analyzed ridership trends and ride lengths across the months, focusing on differences between casual and member riders.</p>
<p><strong>Data Preparation:</strong> - Extracted the month from the ride start times and arranged them chronologically for clear visualization. - Grouped the data by rider type (member_casual) and month to calculate total rides and average ride lengths.</p>
<p><strong>Visualizations:</strong> - A bar plot was created to showcase the total rides per month, highlighting seasonal fluctuations in ridership patterns for casual and member riders. - Another bar plot was used to display the average ride length per month, providing insights into how trip durations vary with the seasons for each rider type.</p>
<div id="b1dddde2-9ed7-4ffd-b4cb-f06a28229342" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract month from the started_at column</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'month'</span>] <span class="op">=</span> df[<span class="st">'started_at'</span>].dt.month_name()</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Order months chronologically for better visualization</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>month_order <span class="op">=</span> [</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'January'</span>, <span class="st">'February'</span>, <span class="st">'March'</span>, <span class="st">'April'</span>, <span class="st">'May'</span>, <span class="st">'June'</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'July'</span>, <span class="st">'August'</span>, <span class="st">'September'</span>, <span class="st">'October'</span>, <span class="st">'November'</span>, <span class="st">'December'</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by rider type and month to calculate total rides and average ride length</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">=</span> df.groupby([<span class="st">'member_casual'</span>, <span class="st">'month'</span>]).agg(</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    total_rides<span class="op">=</span>(<span class="st">'ride_id'</span>, <span class="st">'count'</span>),</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    avg_ride_length<span class="op">=</span>(<span class="st">'ride_length'</span>, <span class="st">'mean'</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>).reset_index()</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure months are ordered correctly</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>monthly_summary[<span class="st">'month'</span>] <span class="op">=</span> pd.Categorical(monthly_summary[<span class="st">'month'</span>], categories<span class="op">=</span>month_order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">=</span> monthly_summary.sort_values(<span class="st">'month'</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot total rides per month</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">7</span>))</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>sns.barplot(</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>monthly_summary,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'month'</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'total_rides'</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">'member_casual'</span>,</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span><span class="st">'Set1'</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Total Rides Per Month: Casual vs Member Riders'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Month'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Total Rides'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Rider Type'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot average ride length per month</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">7</span>))</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>sns.barplot(</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>monthly_summary,</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'month'</span>,</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'avg_ride_length'</span>,</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">'member_casual'</span>,</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span><span class="st">'Set1'</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Ride Length Per Month: Casual vs Member Riders'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Month'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Average Ride Length (minutes)'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Rider Type'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_v03_files/figure-html/cell-20-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="observations-1" class="level4">
<h4 class="anchored" data-anchor-id="observations-1">Observations:</h4>
<p><strong>Casual Riders:</strong> - Activity peaks during summer months (June–August), reflecting seasonal leisure usage. - Ride lengths are generally longer, showing variability based on weather and events.</p>
<p><strong>Member Riders:</strong> - Maintain steady activity throughout the year, indicating consistent commuting patterns. - Ride lengths are shorter and more uniform, emphasizing efficiency and purpose.</p>
</section>
</section>
</section>
<section id="final-observations" class="level2">
<h2 class="anchored" data-anchor-id="final-observations">Final Observations:</h2>
<p><strong>1. Time-of-Day Analysis</strong> - Casual riders prefer afternoons and evenings, with weekends (Saturday and Sunday) showing the highest activity. - Member ridership peaks in the mornings and evenings on weekdays, consistent with typical work commute patterns. The heatmaps highlight that both rider types have distinct preferences in terms of time of day and day of the week.</p>
<p><strong>2. Ride Length Distribution</strong> - Casual riders generally have longer ride lengths compared to members, with many rides exceeding 30 minutes. - Member riders have shorter, more uniform ride durations, aligning with routine travel needs. The ride length distribution indicates casual riders utilize the service more for recreation, while members are focused on efficiency.</p>
<p><strong>3. Peak vs Non-Peak Hour Analysis</strong> - Casual riders dominate during non-peak hours, likely due to flexible schedules or recreational use. - Members primarily use the service during peak hours, indicating routine commuting. Average ride length during non-peak hours is significantly higher for casual riders, suggesting leisurely rides.</p>
<p><strong>4. Behavioral Analysis by Month</strong> - Casual riders exhibit higher variability in ride activity across the months, likely influenced by seasonal trends and leisure preferences. - Member riders show consistent ride activity throughout the year, reflecting regular commuting patterns. The bar plots reveal that summer months (June–August) are peak periods for casual riders, while member ridership remains steady.</p>
<section id="key-insights" class="level3">
<h3 class="anchored" data-anchor-id="key-insights">Key Insights:</h3>
<p><strong>Differentiated Usage Patterns</strong></p>
<section id="casual-riders" class="level4">
<h4 class="anchored" data-anchor-id="casual-riders">Casual Riders:</h4>
<p>Casual riders primarily use Cyclistic bikes for recreational purposes during weekends, afternoons, and evenings. Their ride lengths are often longer, suggesting leisurely activities like sightseeing or social outings.</p>
<p><strong>Notable Exception:</strong> A subset of casual riders demonstrates behavior similar to members during early morning hours, with ride lengths matching those of members. This suggests short commutes, possibly to the gym or work.</p>
</section>
<section id="members" class="level4">
<h4 class="anchored" data-anchor-id="members">Members:</h4>
<p>Members exhibit consistent usage patterns aligned with workday commutes, peaking during weekday mornings and evenings. Their shorter and more uniform ride lengths reflect an emphasis on routine, efficiency, and reliability.</p>
</section>
</section>
<section id="opportunities-to-convert-casual-riders" class="level3">
<h3 class="anchored" data-anchor-id="opportunities-to-convert-casual-riders">Opportunities to Convert Casual Riders</h3>
<p><strong>1. Target Casual Riders with Member-like Patterns</strong></p>
<ul>
<li>Casual riders with behavior resembling members (e.g., short morning commutes) represent a promising segment for membership conversion.</li>
<li>Cyclistic could promote membership benefits to these riders, highlighting cost savings for frequent short trips and perks like priority access during peak hours.</li>
</ul>
<p><strong>2. Seasonal Campaigns for Recreational Riders</strong></p>
<ul>
<li>Since casual ridership spikes during summer months (June–August), targeted campaigns emphasizing unlimited rides and reduced costs for longer trips could appeal to recreational users.</li>
</ul>
<p><strong>3. Highlight Convenience and Value</strong></p>
<ul>
<li>Many casual riders may not realize the cost-effectiveness of annual memberships. Cyclistic can create digital media campaigns showcasing how frequent casual rides accumulate costs compared to a fixed annual fee.</li>
</ul>
</section>
<section id="recommendations-for-digital-media-strategy" class="level3">
<h3 class="anchored" data-anchor-id="recommendations-for-digital-media-strategy">Recommendations for Digital Media Strategy</h3>
<p><strong>1. Personalized Campaigns</strong></p>
<ul>
<li>Use rider data analytics to identify casual riders with consistent usage patterns.</li>
<li>Send personalized emails or app notifications emphasizing membership value, tailored to individual habits (e.g., “Ride more like a pro! Save on your weekly morning rides.”).</li>
</ul>
<p><strong>2. Social Proof and Testimonials</strong></p>
<ul>
<li>Share testimonials from current members who started as casual riders but found membership beneficial for daily routines or recreational activities.</li>
</ul>
<p><strong>3. Promotions and Incentives</strong></p>
<ul>
<li>Offer limited-time discounts or perks for casual riders to try memberships, particularly during the summer months.</li>
<li>Bundle memberships with additional perks (e.g., discounts at gyms, cafes, or attractions near high-activity zones).</li>
</ul>
<p><strong>4. Engage Through Interactive Content</strong></p>
<ul>
<li>Use social media platforms with engaging content like polls (“How much do you save as a Cyclistic member?”) and challenges (e.g., “Ride to 10 destinations this month as a member to win prizes!”).</li>
</ul>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>By targeting casual riders who exhibit consistent behaviors similar to members, emphasizing the financial and convenience benefits of memberships, and creating tailored digital campaigns, Cyclistic can effectively convert casual riders into loyal annual members. Additionally, using data insights to address specific use cases, such as short commutes during mornings or recreational rides during summer, will strengthen engagement and drive membership growth.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/aravindsankars\.github\.io\/data-analysis\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>